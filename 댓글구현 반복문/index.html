<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">

    <style>
        *{
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

ul,li{
    list-style: none;
}

a{
    text-decoration: none;
    color: #555;
}

img{
    width: 100%;
    display: block;
}

.wrap{
    max-width: 450px;
    width: 100%;
    margin: 0 auto;
    overflow: hidden;
}

.con{
    background-color: #f1f1f1;
    margin-top: 35px;
    padding: 20px;
    border-radius: 30px;
}

.user_info{
    display: flex;
    align-items: center;
    font-size: 20px;
    font-weight: 600;
}

.avatar{
    width: 45px;
    height: 45px;
    border-radius: 50%;
    background-color: lightslategray;
    margin-right: 15px;
    overflow: hidden;
}

.bg{
    width: 100%;
    height: 300px;
    background-color: lightslategray;
    margin: 20px 0;
    background: url(https://mblogthumb-phinf.pstatic.net/MjAxODA1MjdfMTUx/MDAxNTI3NDIzODQ2MDU0.xgp0tOKeaXLfzQe8fAFfeAJLMaZW6Alspf05nMiGRSUg.O6FZJVUUk06jY2Wo4n-Xm180Ak4C25haloH3JsAJTCQg.PNG.polarisians/2.png?type=w800) no-repeat ;
    background-size: cover;
}

.bg img{
    height: 100%;
    object-fit: cover;
}

.heart{
    font-size: 20px;
    color: #555;
    cursor: pointer;
}

.comment{
    width: 100%;
    margin: 20px 0;
}

.commentInput{
    all: unset;
    width: 350px;
    height: 40px;
    border-radius: 10px;
    border-bottom: 2px solid #dbdbdb;
    background-color: rgba(255, 255, 255, 0.5);
}

.submitButton{
    all: unset;
    width: 50px;
    height: 40px;
    background-color: #fff;
    border-radius: 10px;
    text-align: center;
    font-size: 15px;
    font-weight: 600;
}

.comment h2{
    margin-top: 10px;
    font-size: 20px;
}

.commentsList li{
    margin-bottom: 7px;
    font-size: 14px;

}

.commentsList button{
    all: unset;
    width: 40px;
    height: 30px;
    background-color: #fff;
    border-radius: 10px;
    text-align: center;
    font-size: 12px;
    cursor: pointer;
}
    </style>
</head>
<body>

    
<div class="wrap">

    <div class="con">
        <div class = "user_info">
            <div class="avatar"><img src="https://i.pinimg.com/736x/2a/9c/0b/2a9c0bc5aaf2e6c8c26416ad03dcc6cc.jpg" alt="Calcifer"></div>
            <div class="username">Calcifer</div>
        </div>

        <div class="bg"></div>

        <div class="bottom_wrap">
            <div class="heart">
                <i class = "fa-regular fa-heart fa-xl"></i>
            </div>
            <div class="comment">

                <form>
                    <input class="commentInput" type="text" placeholder="댓글을 입력해주세요.">
                    <button class="submitButton">입력</button>
                </form>

                <div class="commets_box">
                    <h2>댓글</h2>
                    <ul class="commentsList"></ul>
                </div>

            </div>

        </div>

    </div>

</div>
    

    <script>

const formEl = document.querySelector('form');
const commentInput = document.querySelector('.commentInput');
const commentList = document.querySelector('.commentsList');


const loadComments = () => {
    const commentCount = localStorage.getItem('commentCount') || 0;
    commentList.innerHTML = '';
    for (let i = 1; i <= commentCount; i++) {
        const comment = localStorage.getItem(`comment_${i}`);
        if (comment) {
            addComment(comment, i);
        }
    }
};


const addComment = (comment, index) => {
    const commentEl = document.createElement('li');
    commentEl.innerText = comment;

    // 삭제 버튼 생성
    const deleteBtn = document.createElement('button');
    deleteBtn.innerText = '삭제';
    deleteBtn.style.marginLeft = '10px';

    // 삭제 버튼 클릭 시 댓글 삭제
    deleteBtn.addEventListener('click', () => {
        localStorage.removeItem(`comment_${index}`);
        loadComments(); 
    });

    commentEl.append(deleteBtn);
    commentList.append(commentEl); 
};

// 댓글을 제출하는 함수
const handleSubmit = (e) => {
    e.preventDefault();

    const inputValue = commentInput.value.trim();
    if (!inputValue) return;

    let commentCount = localStorage.getItem('commentCount') || 0;
    commentCount++;

    localStorage.setItem(`comment_${commentCount}`, inputValue);
    localStorage.setItem('commentCount', commentCount);

    addComment(inputValue, commentCount);
    commentInput.value = '';
};

loadComments();


formEl.addEventListener('submit', handleSubmit);

    </script>

</body>
</html>